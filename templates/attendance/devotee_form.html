{% extends 'base.html' %}

{% block title %}{{ title }} - Temple Attendance{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-md-8">
        <div class="card">
            <div class="card-header">
                <h4><i class="fas fa-user"></i> {{ title }}</h4>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Name</label>
                                <input type="text" name="name" class="form-control" value="{{ devotee.name|default:'' }}" required minlength="2" maxlength="100" pattern="[A-Za-z\s]+" title="Name should only contain letters and spaces">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Contact Number</label>
                                <input type="tel" name="contact_number" class="form-control" value="{{ devotee.contact_number|default:'' }}" required pattern="[0-9]{10}" maxlength="10" title="Enter 10 digit mobile number">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Age Group</label>
                                <select name="age_group" class="form-select" required>
                                    <option value="">Select Age Group</option>
                                    <option value="0-10" {% if devotee.age_group == '0-10' %}selected{% endif %}>0-10 years</option>
                                    <option value="11-18" {% if devotee.age_group == '11-18' %}selected{% endif %}>11-18 years</option>
                                    <option value="19-25" {% if devotee.age_group == '19-25' %}selected{% endif %}>19-25 years</option>
                                    <option value="26-40" {% if devotee.age_group == '26-40' %}selected{% endif %}>26-40 years</option>
                                    <option value="41-60" {% if devotee.age_group == '41-60' %}selected{% endif %}>41-60 years</option>
                                    <option value="60+" {% if devotee.age_group == '60+' %}selected{% endif %}>60+ years</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Sabha Type</label>
                                <select name="sabha_type" class="form-select" required>
                                    <option value="bal" {% if devotee.sabha_type == 'bal' %}selected{% endif %}>Bal Sabha</option>
                                    <option value="yuvak" {% if devotee.sabha_type == 'yuvak' %}selected{% endif %}>Yuvak Sabha</option>
                                    <option value="mahila" {% if devotee.sabha_type == 'mahila' %}selected{% endif %}>Mahila Sabha</option>
                                    <option value="sanyukt" {% if devotee.sabha_type == 'sanyukt' %}selected{% endif %}>Sanyukt Sabha</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea name="address" class="form-control" rows="3">{{ devotee.address|default:'' }}</textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Photo URL</label>
                        <input type="url" name="photo_url" class="form-control" value="{{ devotee.photo_url|default:'' }}">
                        <div class="form-text">Enter Google Drive or image URL</div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Join Date</label>
                        <input type="date" name="join_date" class="form-control" value="{{ devotee.join_date|default:'' }}" max="{{ today }}" required>
                    </div>
                    <div class="d-flex flex-column flex-sm-row justify-content-between gap-2">
                        <a href="{% url 'devotee_list' %}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-temple">Save Devotee</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}